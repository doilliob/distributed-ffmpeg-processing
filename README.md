# distributed-ffmpeg-processing
Решение для распределенной конвертации видео с помощью ffmpeg.
Решение родилось из потребности вырезать и конвертировать большое количество видео (1,5 ТБ видео - 4000 ч., более 3000 фрагментов).
Видео должно вырезаться по каждому из 1500 участников, называться определенным образом и сжиматься.

* В Docker-контейнере поднимается RabbitMQ для раздачи заданий клиентам
* В Docker-контейнере поднимается VsFTPD для раздачи/получения видео
* На клиентах запускается приложение worker (C#) 
* Worker получает задание через RabbitMQ, скачивает часть видео через VsFTPD, конвертирует его и выкладывает на VsFTPD


## Компоненты
* RabbitMQ (Docker)
* VsFTPD (Docker)
* C# (+ RabbitMQ.Client, Newtonsoft.Json)
* Python (+ PIKA)

## Файлы
* api.json - Файл со структурой задания для обработки
* **client** - Классы для компиляции C# клментского приложения (необходимо в папку с релизом положить статически слинкованный ffmpeg.exe)
* **server** - Docker-compose файл для запуска контейнеров RabbitMQ, VsFTPD в Docker
* **scripts** - Скрипт на Python для публикации заданий на сервере RabbitMQ
